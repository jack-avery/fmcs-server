FROM amazoncorretto:20-alpine

WORKDIR /fmcs
# Install Fabric Server
RUN wget -O fabric-server-mc.{{ item.minecraft_ver }}-loader.{{ item.fabric_ver }}-launcher.{{ item.fabric_inst_ver }}.jar https://meta.fabricmc.net/v2/versions/loader/{{ item.minecraft_ver }}/{{ item.fabric_ver }}/{{ item.fabric_inst_ver }}/server/jar

WORKDIR /fmcs/mods
# Install Mods
{% for mod, link in item.mods.items() %}
RUN wget -O "{{ mod }}.jar" {{ link }}
{% endfor %}

# Copy in generated items
WORKDIR /fmcs
COPY . .

ENTRYPOINT [ "./run.sh" ]
